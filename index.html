<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Passaparola</title>
    
    <link rel="icon" type="image/png" href="passaparola.png">
    <link rel="apple-touch-icon" href="passaparola.png">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f0f4f8;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        body.splash-active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); overflow-y: auto; }

        /* TEMA SEÇİM EKRANI */
        #splash-screen { text-align: center; padding: 20px; width: 100%; }
        .theme-btn { 
            background: white; color: #764ba2; padding: 20px; 
            margin: 10px; border-radius: 15px; font-weight: 800;
            display: inline-block; width: 140px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* OYUN ALANI */
        #game-screen { display: none; flex-direction: column; align-items: center; width: 100%; }
        #game-screen.active { display: flex; }

        /* DAİRE SİSTEMİ (Sabit ve Taşmaz) */
        .circle-container {
            position: relative;
            width: 85vw;
            height: 85vw;
            max-width: 350px;
            max-height: 350px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        /* HARFLERİN DİZİLİMİ */
        .letter-circle {
            position: absolute;
            width: 32px;
            height: 32px;
            background: #dc143c;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
            border: 2px solid white;
            /* HARF DİZİLİM SİHRİ: Her harf kendi değişkenine göre döner */
            transform: rotate(calc(var(--i) * (360deg / var(--total)))) translateY(calc(-42.5vw + 20px));
        }

        /* Büyük ekranlarda (Masaüstü) daireyi sabitler */
        @media (min-width: 500px) {
            .letter-circle { transform: rotate(calc(var(--i) * (360deg / var(--total)))) translateY(-155px); }
        }

        /* Harf açısını düzeltmek için (Harfin kendisi dik durmalı) */
        .letter-circle span { transform: rotate(calc(var(--i) * (-360deg / var(--total)))); }

        .letter-circle.active { background: #ffd700; color: black; transform: rotate(calc(var(--i) * (360deg / var(--total)))) translateY(calc(-42.5vw + 20px)) scale(1.3); z-index: 10; }
        .letter-circle.correct { background: #4caf50; }

        /* MERKEZ PANEL */
        #center-ui { width: 70%; text-align: center; z-index: 5; }
        #question-box { font-size: 0.85rem; background: #f8f9fa; padding: 10px; border-radius: 10px; border: 1px solid #ddd; display: none; }
        #answer-box { font-size: 1.1rem; font-weight: bold; color: #d32f2f; margin-top: 5px; display: none; }

        /* BUTONLAR */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 90%; max-width: 400px; }
        button { padding: 15px; border-radius: 20px; border: none; font-weight: bold; color: white; }
        #main-btn { grid-column: span 2; background: #2196F3; font-size: 1.2rem; }
        #home-btn { background: #9C27B0; }
        #reset-btn { background: #FF9800; }
    </style>
</head>
<body class="splash-active">

    <div id="splash-screen">
        <h1 style="color:white; margin-bottom:20px;">PASSAPAROLA</h1>
        <div class="theme-btn" onclick="start('Türkçe')">Türkçe</div>
        <div class="theme-btn" onclick="start('Genel Kültür')">Genel Kültür</div>
    </div>

    <div id="game-screen">
        <div class="circle-container" id="circle-box">
            <div id="center-ui">
                <h2 id="status-text">PASSAPAROLA</h2>
                <div id="question-box"></div>
                <div id="answer-box"></div>
            </div>
        </div>
        <div class="controls">
            <button id="main-btn" onclick="play()">Oyuna Başla</button>
            <button id="home-btn" onclick="location.reload()">Anasayfa</button>
            <button id="reset-btn" onclick="play(true)">Sıfırla</button>
        </div>
    </div>

    <script>
        const themes = {
            "Türkçe": [
                {l:"A", q:"İsmin eş anlamlısı?", a:"AD"},
                {l:"B", q:"Kitapların toplandığı yer?", a:"KÜTÜPHANE"},
                {l:"C", q:"Anlamlı kelime dizisi?", a:"CÜMLE"},
                {l:"D", q:"Dil kurallarını inceleyen bilim?", a:"DİLBİLGİSİ"}
            ],
            "Genel Kültür": [
                {l:"A", q:"Türkiye'nin başkenti?", a:"ANKARA"},
                {l:"B", q:"En büyük kıta?", a:"ASYA"}
            ]
        };

        let activeData = [];
        let index = -1;
        let mode = 0; // 0: Soru bekliyor, 1: Cevap bekliyor

        function start(theme) {
            activeData = themes[theme];
            document.body.classList.remove('splash-active');
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('game-screen').classList.add('active');
            
            const box = document.getElementById('circle-box');
            activeData.forEach((item, i) => {
                const div = document.createElement('div');
                div.className = 'letter-circle';
                div.id = 'L-' + i;
                // CSS Değişkenlerini gönderiyoruz
                div.style.setProperty('--i', i);
                div.style.setProperty('--total', activeData.length);
                div.innerHTML = `<span>${item.l}</span>`;
                box.appendChild(div);
            });
        }

        function play(reset = false) {
            if(reset) { location.reload(); return; }
            
            const qBox = document.getElementById('question-box');
            const aBox = document.getElementById('answer-box');
            const sText = document.getElementById('status-text');
            const btn = document.getElementById('main-btn');

            if (mode === 0) {
                index++;
                if(index >= activeData.length) { alert("Bitti!"); return; }
                
                document.querySelectorAll('.letter-circle').forEach(el => el.classList.remove('active'));
                document.getElementById('L-' + index).classList.add('active');

                sText.style.display = 'none';
                qBox.style.display = 'block';
                aBox.style.display = 'none';
                qBox.innerText = activeData[index].q;
                btn.innerText = "Cevabı Gör";
                mode = 1;
            } else {
                aBox.style.display = 'block';
                aBox.innerText = activeData[index].a;
                document.getElementById('L-' + index).classList.add('correct');
                btn.innerText = "Sıradaki Harf";
                mode = 0;
            }
        }
    </script>
</body>
</html>

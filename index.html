<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Passaparola</title>
    
    <link rel="icon" type="image/png" href="passaparola.png">
    <link rel="apple-touch-icon" href="passaparola.png">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f0f4f8;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            touch-action: manipulation;
        }

        body.splash-active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

        /* GİRİŞ EKRANI */
        #splash-screen { text-align: center; padding: 20px; width: 100%; }
        .theme-btn { 
            background: white; color: #764ba2; padding: 18px; 
            margin: 8px; border-radius: 15px; font-weight: 800;
            display: inline-block; width: 150px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        /* OYUN EKRANI */
        #game-screen { display: none; flex-direction: column; align-items: center; width: 100%; height: 100%; justify-content: space-evenly; }
        #game-screen.active { display: flex; }

        /* ÇARK ALANI */
        #circle-wrapper {
            position: relative;
            width: 92vw;
            height: 92vw;
            max-width: 450px;
            max-height: 450px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .letter-circle {
            position: absolute;
            width: 34px;
            height: 34px;
            background: #dc143c;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
            font-weight: bold;
            border: 2px solid white;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .letter-circle.active { background: #ffd700; color: black; transform: scale(1.3); box-shadow: 0 0 15px #ffd700; z-index: 20; }
        .letter-circle.correct { background: #4caf50; }

        /* MERKEZ PANEL */
        #center-ui { width: 75%; text-align: center; z-index: 5; }
        #status-text { font-size: 1.2rem; font-weight: 800; color: #2c3e50; }
        #question-box { font-size: 0.9rem; background: #f8f9fa; padding: 12px; border-radius: 12px; border: 1px solid #ddd; display: none; line-height: 1.4; max-height: 140px; overflow-y: auto; }
        #answer-box { font-size: 1.2rem; font-weight: bold; color: #d32f2f; margin-top: 8px; display: none; }

        /* KONTROLLER */
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 90%; max-width: 450px; padding-bottom: 10px; }
        button { padding: 16px; border-radius: 25px; border: none; font-weight: bold; color: white; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        #main-btn { grid-column: span 2; background: #2196F3; font-size: 1.2rem; }
        #home-btn { background: #9C27B0; }
        #reset-btn { background: #FF9800; }
    </style>
</head>
<body class="splash-active">

    <div id="splash-screen">
        <h1 style="color:white; margin-bottom:10px; font-size: 2.5rem;">Passaparola</h1>
        <p style="color:white; margin-bottom: 30px;">Bir tema seçin</p>
        <div id="theme-list"></div>
    </div>

    <div id="game-screen">
        <h2 id="theme-title" style="color: #764ba2;"></h2>
        <div id="circle-wrapper">
            <div id="center-ui">
                <h2 id="status-text">PASSAPAROLA</h2>
                <div id="question-box"></div>
                <div id="answer-box"></div>
            </div>
        </div>
        <div class="controls">
            <button id="main-btn" onclick="nextStep()">Oyuna Başla</button>
            <button id="home-btn" onclick="location.reload()">Anasayfa</button>
            <button id="reset-btn" onclick="resetGame()">Sıfırla</button>
        </div>
    </div>

    <script>
        const themes = {
            "Türkçe": [
                {l:"A", q:"İsmin eş anlamlısı nedir?", a:"AD"},
                {l:"B", q:"Kitapların ödünç alındığı yer?", a:"KÜTÜPHANE"},
                {l:"C", q:"Kelimelerin birleşmesiyle oluşan yapı?", a:"CÜMLE"},
                {l:"D", q:"Dilin kurallarını inceleyen bilim?", a:"DİLBİLGİSİ"},
                {l:"E", q:"Derslerde yapılan çalışmaların adı?", a:"ETKİNLİK"},
                {l:"F", q:"Hayvanlara kişilik verilerek anlatılan masal?", a:"FABL"},
                {l:"G", q:"Derslerde kullanılan resim ve tablolar?", a:"GÖRSEL"},
                {l:"H", q:"Yaşanmış olayları anlatan yazı türü?", a:"HİKAYE"}
            ],
            "Genel Kültür": [
                {l:"A", q:"Türkiye'nin başkenti?", a:"ANKARA"},
                {l:"B", q:"Dünyanın en büyük okyanusu?", a:"BÜYÜK OKYANUS"},
                {l:"C", q:"Vücudumuzdaki en büyük organ?", a:"CİLT"},
                {l:"D", q:"Güneş sistemindeki en büyük gezegen?", a:"JÜPİTER"}
            ]
        };

        let currentData = [];
        let currentIndex = -1;
        let step = 0; // 0: soru bekle, 1: cevap bekle

        // Temaları listele
        const list = document.getElementById('theme-list');
        Object.keys(themes).forEach(t => {
            const btn = document.createElement('div');
            btn.className = 'theme-btn';
            btn.innerText = t;
            btn.onclick = () => startGame(t);
            list.appendChild(btn);
        });

        function startGame(theme) {
            currentData = themes[theme];
            document.body.classList.remove('splash-active');
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('theme-title').innerText = "Tema: " + theme;
            
            drawBoard();
        }

        function drawBoard() {
            const wrapper = document.getElementById('circle-wrapper');
            // Eski harfleri temizle
            document.querySelectorAll('.letter-circle').forEach(l => l.remove());

            const rect = wrapper.getBoundingClientRect();
            const radius = (rect.width / 2) - 25;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            currentData.forEach((item, i) => {
                const angle = (i * (360 / currentData.length)) - 90;
                const radian = angle * (Math.PI / 180);
                
                const x = centerX + radius * Math.cos(radian);
                const y = centerY + radius * Math.sin(radian);

                const div = document.createElement('div');
                div.className = 'letter-circle';
                div.id = 'L-' + i;
                div.innerText = item.l;
                
                // Tam ortalamak için (genişlik/2) çıkarıyoruz
                div.style.left = (x - 17) + 'px';
                div.style.top = (y - 17) + 'px';
                
                wrapper.appendChild(div);
            });
        }

        function nextStep() {
            const qBox = document.getElementById('question-box');
            const aBox = document.getElementById('answer-box');
            const sText = document.getElementById('status-text');
            const btn = document.getElementById('main-btn');

            if (step === 0) {
                currentIndex++;
                if (currentIndex >= currentData.length) { alert("Tebrikler! Oyun bitti."); location.reload(); return; }
                
                document.querySelectorAll('.letter-circle').forEach(l => l.classList.remove('active'));
                document.getElementById('L-' + currentIndex).classList.add('active');

                sText.style.display = 'none';
                qBox.style.display = 'block';
                aBox.style.display = 'none';
                qBox.innerText = currentData[currentIndex].q;
                btn.innerText = "Cevabı Gör";
                step = 1;
            } else {
                aBox.style.display = 'block';
                aBox.innerText = currentData[currentIndex].a;
                document.getElementById('L-' + currentIndex).classList.add('correct');
                btn.innerText = "Sıradaki Harf";
                step = 0;
            }
        }

        function resetGame() {
            currentIndex = -1;
            step = 0;
            document.getElementById('status-text').style.display = 'block';
            document.getElementById('question-box').style.display = 'none';
            document.getElementById('answer-box').style.display = 'none';
            document.getElementById('main-btn').innerText = "Oyuna Başla";
            drawBoard();
        }
    </script>
</body>
</html>
